<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nexus â€¢ Painel Administrativo</title>

  <link rel="stylesheet" href="admin.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet" />
</head>

<body>
  <div id="admin-wrapper">
    <aside class="sidebar">
      <h2>Nexus <span>Admin</span></h2>
      <p class="sidebar-sub">Painel avanÃ§ado de gestÃ£o e manutenÃ§Ã£o da plataforma.</p>

      <nav>
        <button class="nav-btn active" data-target="view-dashboard">ğŸ“Š Dashboard</button>
        <button class="nav-btn" data-target="view-broadcast">ğŸ“£ ForÃ§ar Reload</button>
        <button class="nav-btn" data-target="view-mural">ğŸ“° Mural</button>
        <button class="nav-btn" data-target="view-presenca">ğŸŸ¢ PresenÃ§a Online</button>
        <button class="nav-btn" data-target="view-users">ğŸ‘¥ UsuÃ¡rios & PermissÃµes</button>
        <button class="nav-btn" data-target="view-tools">ğŸ§ª Testes & Utilidades</button>
      </nav>

      <div class="sidebar-footer">
        <div id="admin-user-email" class="admin-user-email">Carregando...</div>
        <small class="muted">Acesso restrito Ã  equipe de TI.</small>
      </div>
    </aside>

    <main class="content">
      <!-- ============ DASHBOARD ============ -->
      <section id="view-dashboard" class="view visible">
        <h1>VisÃ£o Geral</h1>
        <p class="sub">
          Indicadores em tempo real para monitorar o Nexus.
        </p>

        <div class="grid-cards">
          <div class="kpi-card">
            <span class="kpi-label">UsuÃ¡rios cadastrados</span>
            <strong id="kpi-users">â€”</strong>
          </div>

          <div class="kpi-card">
            <span class="kpi-label">UsuÃ¡rios online agora</span>
            <strong id="kpi-online">â€”</strong>
          </div>

          <div class="kpi-card">
            <span class="kpi-label">Ãšltimo reload forÃ§ado</span>
            <strong id="kpi-reload">â€”</strong>
          </div>

          <div class="kpi-card">
            <span class="kpi-label">Comunicados no mural</span>
            <strong id="kpi-mural">â€”</strong>
          </div>
        </div>

        <div class="card card-info">
          <h2>Resumo da Ãºltima atualizaÃ§Ã£o</h2>
          <div id="dashboard-last-broadcast">
            <p class="muted">Nenhuma atualizaÃ§Ã£o registrada ainda.</p>
          </div>
        </div>
      </section>

      <!-- ============ BROADCAST / RELOAD ============ -->
      <section id="view-broadcast" class="view">
        <h1>ForÃ§ar Reload Global</h1>
        <p class="sub">
          Envie uma atualizaÃ§Ã£o global que irÃ¡ recarregar o Nexus para todos os usuÃ¡rios conectados.
          ApÃ³s o reload, eles verÃ£o uma notificaÃ§Ã£o explicando a mudanÃ§a.
        </p>

        <div class="card">
          <label class="field">
            <span>Categoria da atualizaÃ§Ã£o</span>
            <input id="bc-category" type="text"
              placeholder="Ex: CorreÃ§Ã£o de bugs, AtualizaÃ§Ã£o visual, Nova funcionalidade...">
          </label>

          <label class="field">
            <span>ReferÃªncia (opcional)</span>
            <input id="bc-ref" type="text" placeholder="Ex: #card-1882, #deploy-v1.4.1, chamado #TI-009">
          </label>

          <label class="field">
            <span>Mensagem para os usuÃ¡rios</span>
            <textarea id="bc-message" rows="4"
              placeholder="Explique de forma simples o que foi alterado, corrigido ou adicionado."></textarea>
          </label>

          <div class="actions-row">
            <button id="bc-send" class="btn btn-primary">ğŸš€ Enviar AtualizaÃ§Ã£o & ForÃ§ar Reload</button>
            <button id="bc-test" class="btn btn-secondary">ğŸ‘€ Ver como o usuÃ¡rio irÃ¡ enxergar</button>
          </div>

          <p id="bc-status" class="status"></p>
          <div class="card card-preview" id="broadcast-preview" style="margin-top:20px; display:none;">
            <h2>PrÃ©-visualizaÃ§Ã£o</h2>
            <div id="broadcast-preview-content" class="muted">
              Digite algo e clique em â€œVer como o usuÃ¡rio irÃ¡ enxergarâ€.
            </div>
          </div>

        </div>

        <div class="card card-logs">
          <h2>HistÃ³rico de atualizaÃ§Ãµes</h2>
          <div id="log-list" class="log-list">
            <p class="muted">Carregando...</p>
          </div>
        </div>
      </section>

      <!-- ============ MURAL ============ -->
      <section id="view-mural" class="view">
        <h1>Mural de Comunicados</h1>
        <p class="sub">Gerencie comunicados internos exibidos para os usuÃ¡rios.</p>

        <div class="card">
          <h2>Novo comunicado</h2>

          <label class="field">
            <span>TÃ­tulo</span>
            <input id="mural-title" type="text" placeholder="Ex: Aviso importante sobre mudanÃ§a de horÃ¡rio">
          </label>

          <label class="field">
            <span>Mensagem</span>
            <textarea id="mural-body" rows="3"
              placeholder="Corpo do comunicado que aparecerÃ¡ para os usuÃ¡rios."></textarea>
          </label>

          <button id="mural-send" class="btn btn-primary">ğŸ“¢ Publicar no mural</button>
          <p id="mural-status" class="status"></p>
        </div>

        <div class="card">
          <h2>Comunicados recentes</h2>
          <div id="mural-list" class="mural-list">
            <p class="muted">Carregando...</p>
          </div>
        </div>
      </section>

      <!-- ============ PRESENÃ‡A ============ -->
      <section id="view-presenca" class="view">
        <h1>PresenÃ§a Online</h1>
        <p class="sub">Visualize os usuÃ¡rios online em tempo real e os Ãºltimos acessos.</p>

        <div class="card">
          <div id="presence-list" class="presence-list">
            <p class="muted">Carregando...</p>
          </div>
        </div>
      </section>

      <!-- ============ USUÃRIOS & PERMISSÃ•ES ============ -->
      <section id="view-users" class="view">
        <h1>UsuÃ¡rios & PermissÃµes</h1>
        <p class="sub">
          Consulte e altere o papel de cada usuÃ¡rio. Utilize com cuidado â€“ alteraÃ§Ãµes afetam o acesso ao Nexus.
        </p>

        <div class="card">
          <div id="users-list" class="users-list">
            <p class="muted">Carregando...</p>
          </div>
        </div>
      </section>

      <!-- ============ FERRAMENTAS / TESTES ============ -->
      <section id="view-tools" class="view">
        <h1>Ferramentas de Teste & Utilidades</h1>
        <p class="sub">AÃ§Ãµes rÃ¡pidas para validar funcionalidades de sistema.</p>

        <div class="grid-cards">
          <div class="tool-card">
            <h3>Inbox de Teste</h3>
            <p>Envia uma notificaÃ§Ã£o de teste para a inbox do usuÃ¡rio logado.</p>
            <button id="tool-inbox-test" class="btn btn-secondary">Enviar notificaÃ§Ã£o de teste</button>
          </div>

          <div class="tool-card">
            <h3>Ping Firestore</h3>
            <p>Valida se o Firestore estÃ¡ respondendo corretamente para este projeto.</p>
            <button id="tool-ping" class="btn btn-secondary">Executar ping</button>
            <p id="tool-ping-result" class="status"></p>
          </div>
        </div>
      </section>

    </main>
  </div>

  <script type="module" src="admin.js"></script>
</body>

</html>