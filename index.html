<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nexus ‚Ä¢ Painel Administrativo</title>

  <link rel="stylesheet" href="admin.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet" />
</head>

<body>
  <div id="admin-wrapper">
    <aside class="sidebar">
      <h2>Nexus <span>Admin</span></h2>
      <p class="sidebar-sub">Painel avan√ßado de gest√£o e manuten√ß√£o da plataforma.</p>

      <nav>
        <button class="nav-btn active" data-target="view-dashboard">üìä Dashboard</button>
        <button class="nav-btn" data-target="view-broadcast">üì£ For√ßar Reload</button>
        <button class="nav-btn" data-target="view-mural">üì∞ Mural</button>
        <button class="nav-btn" data-target="view-presenca">üü¢ Presen√ßa Online</button>
        <button class="nav-btn" data-target="view-users">üë• Usu√°rios & Permiss√µes</button>
        <button class="nav-btn" data-target="view-tools">üß™ Testes & Utilidades</button>
      </nav>

      <div class="sidebar-footer">
        <div id="admin-user-email" class="admin-user-email">Carregando...</div>
        <small class="muted">Acesso restrito √† equipe de TI.</small>
      </div>
    </aside>

    <main class="content">
      <!-- ============ DASHBOARD ============ -->
      <section id="view-dashboard" class="view visible">
        <h1>Vis√£o Geral</h1>
        <p class="sub">
          Indicadores em tempo real para monitorar o Nexus.
        </p>

        <div class="grid-cards">
          <div class="kpi-card">
            <span class="kpi-label">Usu√°rios cadastrados</span>
            <strong id="kpi-users">‚Äî</strong>
          </div>

          <div class="kpi-card">
            <span class="kpi-label">Usu√°rios online agora</span>
            <strong id="kpi-online">‚Äî</strong>
          </div>

          <div class="kpi-card">
            <span class="kpi-label">√öltimo reload for√ßado</span>
            <strong id="kpi-reload">‚Äî</strong>
          </div>

          <div class="kpi-card">
            <span class="kpi-label">Comunicados no mural</span>
            <strong id="kpi-mural">‚Äî</strong>
          </div>
        </div>

        <div class="card card-info">
          <h2>Resumo da √∫ltima atualiza√ß√£o</h2>
          <div id="dashboard-last-broadcast">
            <p class="muted">Nenhuma atualiza√ß√£o registrada ainda.</p>
          </div>
        </div>
      </section>

      <!-- ============ BROADCAST / RELOAD ============ -->
      <section id="view-broadcast" class="view">
        <h1>For√ßar Reload Global</h1>
        <p class="sub">
          Envie uma atualiza√ß√£o global que ir√° recarregar o Nexus para todos os usu√°rios conectados.
          Ap√≥s o reload, eles ver√£o uma notifica√ß√£o explicando a mudan√ßa.
        </p>

        <div class="card">
          <label class="field">
            <span>Categoria da atualiza√ß√£o</span>
            <input id="bc-category" type="text"
              placeholder="Ex: Corre√ß√£o de bugs, Atualiza√ß√£o visual, Nova funcionalidade...">
          </label>

          <label class="field">
            <span>Refer√™ncia (opcional)</span>
            <input id="bc-ref" type="text" placeholder="Ex: #card-1882, #deploy-v1.4.1, chamado #TI-009">
          </label>

          <label class="field">
            <span>Mensagem para os usu√°rios</span>
            <textarea id="bc-message" rows="4"
              placeholder="Explique de forma simples o que foi alterado, corrigido ou adicionado."></textarea>
          </label>

          <div class="actions-row">
            <button id="bc-send" class="btn btn-primary">üöÄ Enviar Atualiza√ß√£o & For√ßar Reload</button>
            <button id="bc-test" class="btn btn-secondary">üëÄ Ver como o usu√°rio ir√° enxergar</button>
          </div>

          <p id="bc-status" class="status"></p>
          <div class="card card-preview" id="broadcast-preview" style="margin-top:20px; display:none;">
            <h2>Pr√©-visualiza√ß√£o</h2>
            <div id="broadcast-preview-content" class="muted">
              Digite algo e clique em ‚ÄúVer como o usu√°rio ir√° enxergar‚Äù.
            </div>
          </div>

        </div>

        <div class="card">
          <h3>Status do Sistema</h3>
          <label style="display:flex;align-items:center;gap:10px;cursor:pointer">
            <input type="checkbox" id="toggleMaintenance">
            Ativar modo de manuten√ß√£o
          </label>
          <p id="maintenanceStatus" class="status muted">Carregando...</p>
        </div>


        <div class="card card-logs">
          <h2>Hist√≥rico de atualiza√ß√µes</h2>
          <div id="log-list" class="log-list">
            <p class="muted">Carregando...</p>
          </div>
        </div>
      </section>

      <!-- ============ MURAL ============ -->
      <section id="view-mural" class="view">
        <h1>Mural de Comunicados</h1>
        <p class="sub">Gerencie comunicados internos exibidos para os usu√°rios.</p>

        <div class="card">
          <h2>Novo comunicado</h2>

          <label class="field">
            <span>T√≠tulo</span>
            <input id="mural-title" type="text" placeholder="Ex: Aviso importante sobre mudan√ßa de hor√°rio">
          </label>

          <label class="field">
            <span>Mensagem</span>
            <textarea id="mural-body" rows="3"
              placeholder="Corpo do comunicado que aparecer√° para os usu√°rios."></textarea>
          </label>

          <button id="mural-send" class="btn btn-primary">üì¢ Publicar no mural</button>
          <p id="mural-status" class="status"></p>
        </div>

        <div class="card">
          <h2>Comunicados recentes</h2>
          <div id="mural-list" class="mural-list">
            <p class="muted">Carregando...</p>
          </div>
        </div>
      </section>

      <!-- ============ PRESEN√áA ============ -->
      <section id="view-presenca" class="view">
        <h1>Presen√ßa Online</h1>
        <p class="sub">Visualize os usu√°rios online em tempo real e os √∫ltimos acessos.</p>

        <div class="card">
          <div id="presence-list" class="presence-list">
            <p class="muted">Carregando...</p>
          </div>
        </div>
      </section>

      <!-- ============ USU√ÅRIOS & PERMISS√ïES ============ -->
      <section id="view-users" class="view">
        <h1>Usu√°rios & Permiss√µes</h1>
        <p class="sub">
          Consulte e altere o papel de cada usu√°rio. Utilize com cuidado ‚Äì altera√ß√µes afetam o acesso ao Nexus.
        </p>

        <div class="card">
          <div id="users-list" class="users-list">
            <p class="muted">Carregando...</p>
          </div>
        </div>
      </section>

      <!-- ============ FERRAMENTAS / TESTES ============ -->
      <section id="view-tools" class="view">
        <h1>Ferramentas de Teste & Utilidades</h1>
        <p class="sub">A√ß√µes r√°pidas para validar funcionalidades de sistema.</p>

        <div class="grid-cards">
          <div class="tool-card">
            <h3>Inbox de Teste</h3>
            <p>Envia uma notifica√ß√£o de teste para a inbox do usu√°rio logado.</p>
            <button id="tool-inbox-test" class="btn btn-secondary">Enviar notifica√ß√£o de teste</button>
          </div>

          <div class="tool-card">
            <h3>Ping Firestore</h3>
            <p>Valida se o Firestore est√° respondendo corretamente para este projeto.</p>
            <button id="tool-ping" class="btn btn-secondary">Executar ping</button>
            <p id="tool-ping-result" class="status"></p>
          </div>
        </div>
      </section>

    </main>
  </div>

  <script type="module" src="admin.js"></script>
</body>

</html>